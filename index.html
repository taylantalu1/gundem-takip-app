<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TÃ¼rkiye GÃ¼ndem Takip - GerÃ§ek ZamanlÄ±</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f0f2f5; color: #333; }
        body.dark { background: #121212; color: #ddd; }
        header { text-align: center; padding: 20px; background: #1877f2; color: white; border-radius: 12px; }
        .controls { text-align: center; margin: 20px 0; }
        input, select, button { padding: 10px; margin: 5px; border-radius: 8px; }
        button { background: #1877f2; color: white; border: none; cursor: pointer; }
        .category { background: white; padding: 20px; margin: 15px 0; border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        body.dark .category { background: #1e1e1e; }
        h2 { color: #1877f2; }
        body.dark h2 { color: #90caf9; }
        ul { list-style: none; padding: 0; }
        li a { display: block; padding: 12px; background: #f8f9fa; margin: 8px 0; border-radius: 8px; text-decoration: none; color: #333; }
        body.dark li a { background: #333; color: #ddd; }
        .alert { background: #ffeb3b; padding: 15px; text-align: center; margin: 15px 0; border-radius: 8px; display: none; }
        .loading { text-align: center; font-style: italic; }
    </style>
</head>
<body>
    <header>
        <h1>ðŸ‡¹ðŸ‡· TÃ¼rkiye GÃ¼ndem Takip (GerÃ§ek ZamanlÄ±)</h1>
        <div id="date"></div>
    </header>

    <div class="alert" id="alert">ðŸ”” Yeni veriler yÃ¼klendi!</div>

    <div class="controls">
        <input type="text" id="search" placeholder="Ara..." oninput="render()">
        <select id="interval" onchange="setInterval()">
            <option value="600000">10 Dakika</option>
            <option value="1800000" selected>30 Dakika</option>
            <option value="3600000">1 Saat</option>
        </select>
        <button onclick="fetchData()">Manuel Yenile</button>
        <button onclick="toggleDark()">KaranlÄ±k Mod</button>
    </div>

    <div id="loading" class="loading">Veriler yÃ¼kleniyor...</div>
    <div id="content"></div>

    <script>
        let trends = { x: [], google: [], tiktok: [], instagram: [], youtube: [] };
        let intervalId;
        let dark = false;

        async function fetchData() {
            document.getElementById('loading').style.display = 'block';
            try {
                const proxy = 'https://api.allorigins.win/raw?url=';

                // X Trends - getdaytrends HTML parse (Ã§alÄ±ÅŸÄ±yor)
                const xHtml = await fetch(proxy + 'https://getdaytrends.com/turkey/').then(r => r.text());
                const xRegex = /<a href="\/turkey\/trend\/[^"]*">([^<]+)</g;
                let match;
                trends.x = [];
                while ((match = xRegex.exec(xHtml)) !== null && trends.x.length < 20) {
                    trends.x.push(match[1].trim());
                }

                // Google Trends gÃ¼nlÃ¼k
                const gHtml = await fetch(proxy + 'https://trends.google.com/trends/trendingsearches/daily?geo=TR').then(r => r.text());
                const gRegex = /<a class="title" href="[^"]*">([^<]+)</g;
                trends.google = [];
                while ((match = gRegex.exec(gHtml)) !== null && trends.google.length < 10) {
                    trends.google.push(match[1].trim());
                }

                // TikTok, Instagram, YouTube - statik + gÃ¼ncel trendler (gerÃ§ek raporlardan)
                trends.tiktok = ["Holiday mashups", "Viral dans challengelar", "Zootopia edits", "Komik montajlar", "YÄ±l sonu Ã¶zetleri"];
                trends.instagram = ["All I Want for Christmas Reels", "YÄ±l sonu recap", "Festive humour skeÃ§leri"];
                trends.youtube = ["Minecraft Zengin-Fakir", "GTA roleplay TÃ¼rkÃ§e", "Kerem Komiser bÃ¶lÃ¼mleri"];

                document.getElementById('date').textContent = new Date().toLocaleString('tr-TR');
                document.getElementById('alert').style.display = 'block';
                setTimeout(() => document.getElementById('alert').style.display = 'none', 5000);
            } catch (e) {
                console.error(e);
            }
            document.getElementById('loading').style.display = 'none';
            render();
        }

        function render() {
            const content = document.getElementById('content');
            content.innerHTML = '';
            const query = document.getElementById('search').value.toLowerCase();

            const cats = [
                { title: "ðŸ“± X Trends", items: trends.x.map(t => '#' + t) },
                { title: "ðŸ” Google Trends", items: trends.google },
                { title: "ðŸŽµ TikTok Trends", items: trends.tiktok.map(t => "TikTok: " + t) },
                { title: "ðŸ“¸ Instagram Trends", items: trends.instagram.map(t => "Instagram: " + t) },
                { title: "â–¶ï¸ YouTube Trends", items: trends.youtube.map(t => "YouTube: " + t) }
            ];

            cats.forEach(cat => {
                let filtered = cat.items.filter(i => i.toLowerCase().includes(query));
                if (filtered.length === 0) return;

                const div = document.createElement('div');
                div.className = 'category';
                div.innerHTML = `<h2>${cat.title}</h2><ul></ul>`;
                const ul = div.querySelector('ul');
                filtered.forEach(item => {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    a.target = '_blank';
                    a.textContent = item;

                    if (item.startsWith('#')) {
                        a.href = `https://x.com/hashtag/${item.substring(1)}`;
                    } else if (item.startsWith('TikTok:')) {
                        a.href = `https://www.tiktok.com/search?q=${encodeURIComponent(item.substring(7))}`;
                    } else if (item.startsWith('Instagram:')) {
                        a.href = `https://www.instagram.com/explore/search/keyword/?q=${encodeURIComponent(item.substring(10))}`;
                    } else if (item.startsWith('YouTube:')) {
                        a.href = `https://www.youtube.com/results?search_query=${encodeURIComponent(item.substring(8))}`;
                    } else {
                        a.href = `https://www.google.com/search?q=${encodeURIComponent(item)}`;
                    }

                    li.appendChild(a);
                    ul.appendChild(li);
                });
                content.appendChild(div);
            });
        }

        function setInterval() {
            clearInterval(intervalId);
            const val = parseInt(document.getElementById('interval').value);
            if (val > 0) intervalId = setInterval(fetchData, val);
        }

        function toggleDark() {
            dark = !dark;
            document.body.classList.toggle('dark', dark);
        }

        fetchData();
        setInterval();
    </script>
</body>
</html>
